name: PR – Java Tests

on:
  pull_request:
    branches: [ main ]   # Cambia esto si usas develop u otras ramas

jobs:
  test:
    name: Run Maven Test Suite
    runs-on: ubuntu-latest

    steps:
      # 1. Descarga del código de la PR
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Instalar JDK
      - name: Set up JDK
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'  # OpenJDK
          java-version: '17'       # O la versión que use tu proyecto
          cache: maven

      # 3. Compilar y ejecutar tests
      - name: Run Maven tests
        run: mvn -B clean verify

      # (Opcional) Si usas cobertura de tests (JaCoCo)
      # - name: Upload coverage report
      #   uses: actions/upload-artifact@v4
      #   with:
      #     name: coverage-report
      #     path: target/site/jacoco/
